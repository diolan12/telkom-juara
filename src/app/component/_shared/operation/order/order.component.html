<h3>Order Baru</h3>
<button [fxHide]="user?.role == 2" mat-button (click)="newOrderDialog()" color="accent"><mat-icon>add</mat-icon>Order Baru</button>

<br />
<mat-divider></mat-divider>
<br />

<div [formGroup]="orderFilter">
    <p>Filter berdasarkan status:</p>
    <mat-radio-group aria-label="Filter by order status" formControlName="options">
        <mat-radio-button class="mrb" value="all">Semua</mat-radio-button>
        <mat-radio-button class="mrb" value="pending">Menunggu</mat-radio-button>
        <mat-radio-button class="mrb" value="ongoing">Sedang Dikerjakan</mat-radio-button>
        <mat-radio-button class="mrb" value="trouble">Kendala</mat-radio-button>
        <mat-radio-button class="mrb" value="completed">Selesai</mat-radio-button>
        <mat-radio-button class="mrb" value="archived">Diarsipkan</mat-radio-button>
    </mat-radio-group>
</div>
<br />

<mat-accordion role="list">

    <mat-expansion-panel role="listitem" *ngFor="let order of dataSource.data; let i = index">
        <mat-expansion-panel-header fxLayout="row">
            <mat-panel-title>
                {{order.uid}} - ({{order.customer.name}})
            </mat-panel-title>
            <mat-panel-description fxLayoutAlign="end">
                <i>{{getStatusDisplay(order.status)}}</i>
            </mat-panel-description>
        </mat-expansion-panel-header>
        <div fxLayout="column">
            <div>
                <p>Diterima oleh: {{order.office.name}}</p>
                <p *ngIf="order.field != null">Dikerjakan oleh: {{order.field.name}}</p>
                <p>Layanan: {{order.service.name}}</p>


                <button fxHide type="file" mat-flat-button color="primary">Primary</button>
            </div>
            <div fxLayout="row" fxLayoutAlign="center">
                <div>
                    <img id="doc_customer{{order.id}}" fxHide [fxShow]="order.doc_customer != null" width="200" [src]="order.doc_customer" />
                    <input role="listitem" fxHide mat-flat-button color="primary" accept="image/*" id="doc_customer" type="file" (change)="displayOutput(order.id, 'doc_customer', order, $event)" />
                    <label fxHide [fxShow]="order.status == 'completed'" for="doc_customer" class="mat-flat-button mat-primary" color="primary">Foto dengan {{order.customer.name}}</label>
                </div>
                <div>
                    <img id="doc_house{{order.id}}" fxHide [fxShow]="order.doc_house != null" width="200" [src]="order.doc_house" />
                    <input role="listitem" fxHide mat-flat-button color="primary" accept="image/*" id="doc_house" type="file" (change)="displayOutput(order.id, 'doc_house', order, $event)" />
                    <label fxHide [fxShow]="order.status == 'completed'" for="doc_house" class="mat-flat-button mat-primary" color="primary">Foto rumah pelanggan {{order.id}}</label>
                </div>
            </div>
            <div fxFlexAlign="end" *ngIf="user != null" fxHide [fxShow]="user?.role == 2">
                <button fxHide [fxShow]="order.status == 'pending' || order.status == 'trouble'" (click)="setStatus('ongoing', order)" mat-button color="accent">Kerjakan</button>

                <button fxHide [fxShow]="order.status == 'ongoing'" (click)="setStatus('trouble', order)" mat-button color="warn">Kendala</button>

                <button fxHide [fxShow]="order.status == 'ongoing'" (click)="setStatus('completed', order)" mat-button color="accent">Tandai Selesai</button>
                <button fxHide [fxShow]="order.status == 'completed'" (click)="setStatus('archived', order)" mat-button color="accent">Arsipkan</button>
            </div>
        </div>
    </mat-expansion-panel>

</mat-accordion>